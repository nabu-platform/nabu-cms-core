<sequence xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" disabled="false" id="c9b31911-5cb9-4cc5-8d96-eb749bb4bd21">
	<steps xsi:type="be.nabu.libs.services.vm.step.Switch" disabled="false" id="2d407e8e-93f9-48eb-81cd-0d9bb7602e0a" query="input/token">
		<steps xsi:type="be.nabu.libs.services.vm.step.Switch" disabled="false" label="null" id="3e99abb4-758b-428f-b103-326efce7c781" query="input/role">
			<steps xsi:type="be.nabu.libs.services.vm.step.Map" disabled="false" label="&quot;$guest&quot;" comment="Pseudo role for non-logged in user" id="8ad0f17a-a57c-428c-9c76-6c02e849b87f">
				<steps xsi:type="be.nabu.libs.services.vm.step.Link" disabled="false" id="f9dc1a44-4644-4e09-b1a2-80ba46f4df2e" fixedValue="true" optional="false">
					<from>true</from>
					<to>output/response</to>
				</steps>
			</steps>
			<steps xsi:type="be.nabu.libs.services.vm.step.Map" disabled="false" id="063bf6f8-8411-467a-98fb-877f0b9aeee8">
				<steps xsi:type="be.nabu.libs.services.vm.step.Link" disabled="false" id="3dd18ebb-15cf-4971-b1c7-6e42fdc35b00" fixedValue="true" optional="false">
					<from>false</from>
					<to>output/response</to>
				</steps>
			</steps>
		</steps>
		<steps xsi:type="be.nabu.libs.services.vm.step.Switch" disabled="false" id="ddc6572b-f4f3-4cf4-9eeb-8fbf15b9d987" query="input/role">
			<steps xsi:type="be.nabu.libs.services.vm.step.Map" disabled="false" label="&quot;$user&quot;" comment="Pseudo role for logged in user" id="af191088-393c-4154-9a10-9ff2fc8c042e">
				<steps xsi:type="be.nabu.libs.services.vm.step.Link" disabled="false" id="7b42bf3a-9004-4571-887a-d454317af37a" fixedValue="true" optional="false">
					<from>true</from>
					<to>output/response</to>
				</steps>
			</steps>
			<steps xsi:type="be.nabu.libs.services.vm.step.Sequence" disabled="false" id="7a44d212-d315-47be-8807-95b4504cad19">
				<steps xsi:type="be.nabu.libs.services.vm.step.Map" disabled="false" id="d41507af-7f63-44d8-8aaa-1a3ad71079f0">
					<steps xsi:type="be.nabu.libs.services.vm.step.Invoke" disabled="false" id="8edd6c9c-434c-4ca5-8dbb-af30fe87a80e" invocationOrder="0" temporaryMapping="true" serviceId="nabu.cms.core.providers.security.getUserRoles" resultName="resultcfad4a86d8454d59bac90b2993596030" x="30" y="52">
						<steps xsi:type="be.nabu.libs.services.vm.step.Link" disabled="false" id="6431a274-219c-4800-832a-d5673cc5062b" fixedValue="false" optional="false">
							<from>input/configuration/connectionId</from>
							<to>connection</to>
						</steps>
						<steps xsi:type="be.nabu.libs.services.vm.step.Link" disabled="false" id="cfb12505-3103-4958-8df2-2fe5a1a74728" fixedValue="false" optional="false">
							<from>input/token/realm</from>
							<to>realm</to>
						</steps>
						<steps xsi:type="be.nabu.libs.services.vm.step.Link" disabled="false" id="160e67a2-ea6d-47dd-9563-76dba4384ec9" fixedValue="false" optional="false">
							<from>input/token/name</from>
							<to>alias</to>
						</steps>
					</steps>
					<steps xsi:type="be.nabu.libs.services.vm.step.Link" disabled="false" id="24ee19a2-9f46-44ee-ad36-9974a70396a3" fixedValue="false" optional="false">
						<from>resultcfad4a86d8454d59bac90b2993596030/roles[name = /input/role and pseudo = false]</from>
						<to>requestedRole</to>
					</steps>
				</steps>
				<steps xsi:type="be.nabu.libs.services.vm.step.Map" disabled="false" comment="Set output" id="4f86f649-0b64-4457-90a7-d054b77fab36">
					<steps xsi:type="be.nabu.libs.services.vm.step.Link" disabled="false" id="14eb8c39-a042-4408-b9a7-4a134bb8c4fd" fixedValue="true" optional="false">
						<from>=requestedRole != null</from>
						<to>output/response</to>
					</steps>
				</steps>
			</steps>
		</steps>
	</steps>
</sequence>
<sequence xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" disabled="false" id="50455c47-f76c-4c0b-8891-39280b3e95c8">
	<steps xsi:type="be.nabu.libs.services.vm.step.Switch" disabled="false" id="21afaf6b-a40c-4828-9d8f-8d7b956e08fa" query="input/userId">
		<steps xsi:type="be.nabu.libs.services.vm.step.Sequence" disabled="false" label="null" id="766ecf27-a2fe-454f-b620-b4da0960fd2a">
			<steps xsi:type="be.nabu.libs.services.vm.step.Map" disabled="false" id="77579634-d6f6-4e1b-b22b-dae55af90c70">
				<steps xsi:type="be.nabu.libs.services.vm.step.Invoke" disabled="false" id="5fd1afc9-16c6-4a92-8f9a-b7d9031f632a" serviceId="nabu.utils.Runtime.getCurrentToken" resultName="result5c454efeb26f4b618800cddccdb056c0" temporaryMapping="true" invocationOrder="0" x="38" y="82">
				</steps>
				<steps xsi:type="be.nabu.libs.services.vm.step.Link" disabled="false" id="86c85007-5232-4c96-8343-a6e0bbad5836" fixedValue="false" optional="false">
					<from>result5c454efeb26f4b618800cddccdb056c0/token/name</from>
					<to>input/userId</to>
				</steps>
			</steps>
			<steps xsi:type="be.nabu.libs.services.vm.step.Switch" disabled="false" id="6e01b178-eb6b-4554-be3b-486fe305209f" query="input/userId">
				<steps xsi:type="be.nabu.libs.services.vm.step.Throw" disabled="false" label="null" id="92683a6e-a7f4-4483-b790-3dfe327e009d" message="No user found" xsi:nil="true"/>
			</steps>
		</steps>
	</steps>
	<steps xsi:type="be.nabu.libs.services.vm.step.Map" disabled="false" id="18f1373e-7365-43fc-9396-7d0f7ecfb330">
		<steps xsi:type="be.nabu.libs.services.vm.step.Invoke" disabled="false" id="d4f8c707-773e-43a3-86fd-55a2bc5274ca" serviceId="nabu.web.cms.core.database.user.device.selectById" resultName="result204b618d8b274c398e85aa74c94dca7b" temporaryMapping="true" invocationOrder="0" x="85" y="64">
			<steps xsi:type="be.nabu.libs.services.vm.step.Link" disabled="false" id="53bb94a7-69b6-422b-ae2d-4a97a510a059" fixedValue="false" optional="false">
				<from>input/connectionId</from>
				<to>connection</to>
			</steps>
			<steps xsi:type="be.nabu.libs.services.vm.step.Link" disabled="false" id="529cad26-5099-4806-a96c-e003c10ffdc6" fixedValue="false" optional="false">
				<from>input/transactionId</from>
				<to>transaction</to>
			</steps>
			<steps xsi:type="be.nabu.libs.services.vm.step.Link" disabled="false" id="1d758dd8-40de-45bb-9aaf-b5b3498ce082" fixedValue="false" optional="false">
				<from>input/deviceId</from>
				<to>parameters/deviceId</to>
			</steps>
		</steps>
		<steps xsi:type="be.nabu.libs.services.vm.step.Link" disabled="false" id="2e8bec18-9e2c-439a-b2db-65b3c4ec5b8d" fixedValue="false" optional="false">
			<from>result204b618d8b274c398e85aa74c94dca7b/results[0]</from>
			<to>output/device</to>
		</steps>
	</steps>
	<steps xsi:type="be.nabu.libs.services.vm.step.Switch" disabled="false" id="a937793b-a31d-40ea-8020-166d01eae205" query="output/device">
		<steps xsi:type="be.nabu.libs.services.vm.step.Sequence" disabled="false" label="null" id="b2e10e72-40c3-4e86-9964-39892ba20358">
			<steps xsi:type="be.nabu.libs.services.vm.step.Map" disabled="false" comment="Map device" id="ebb2030f-deb8-4ba8-8796-6122a8eb9a3e">
				<steps xsi:type="be.nabu.libs.services.vm.step.Link" disabled="false" id="87fc17bc-71a9-4b0f-ba3c-4b9dda723eff" fixedValue="false" optional="false">
					<from>input/deviceId</from>
					<to>output/device/id</to>
				</steps>
				<steps xsi:type="be.nabu.libs.services.vm.step.Link" disabled="false" id="ea781b0d-6ce2-4079-91cc-728ec70b9f9f" fixedValue="false" optional="false">
					<from>input/userId</from>
					<to>output/device/userId</to>
				</steps>
			</steps>
		</steps>
		<steps xsi:type="be.nabu.libs.services.vm.step.Switch" disabled="false" id="cb9f3d86-bfdb-432b-8bd2-b882c556a8cc">
			<steps xsi:type="be.nabu.libs.services.vm.step.Throw" disabled="false" label="output/device/userId != input/userId" id="4af6fe36-1697-4c34-b8c4-f147405bf34c" message="=&quot;Invalid user id '&quot; + input/userId + &quot;' for the device id '&quot; + input/deviceId + &quot;', this likely points to manual manipulation by the user&quot;" xsi:nil="true"/>
		</steps>
	</steps>
</sequence>
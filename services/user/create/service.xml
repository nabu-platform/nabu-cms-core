<sequence xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" disabled="false" id="f1d40b98-cdfe-40ae-862a-800313f90bd9">
	<steps xsi:type="be.nabu.libs.services.vm.step.Map" disabled="false" comment="Default values" id="3d70c48b-334d-4e38-b142-c37b2727ffcf">
		<steps xsi:type="be.nabu.libs.services.vm.step.Link" disabled="false" id="34ba6b08-b914-4ce4-9169-03f2a8d2e075" fixedValue="true" optional="true">
			<from>false</from>
			<to>input/anonymous</to>
		</steps>
		<steps xsi:type="be.nabu.libs.services.vm.step.Link" disabled="false" id="9bea41b8-0494-4c26-bdff-25854bb9b346" fixedValue="true" optional="true">
			<from>=input/oauth2Token != null</from>
			<to>input/verified</to>
		</steps>
	</steps>
	<steps xsi:type="be.nabu.libs.services.vm.step.Map" disabled="false" comment="Map user" id="621215a5-f067-49fa-b1a7-580e9cc5f62e">
		<steps xsi:type="be.nabu.libs.services.vm.step.Invoke" disabled="false" id="0b419fed-bf9b-4484-9d36-1c039f8d21fe" serviceId="nabu.web.cms.core.services.node.create" resultName="result11b9964b443d4d4c88f4f27f9f2e40ec" invocationOrder="1" temporaryMapping="true" x="167" y="91">
			<steps xsi:type="be.nabu.libs.services.vm.step.Link" disabled="false" id="06ce7906-cabb-419d-8066-4a8a033a1203" fixedValue="false" optional="false">
				<from>input/connection</from>
				<to>connection</to>
			</steps>
			<steps xsi:type="be.nabu.libs.services.vm.step.Link" disabled="false" id="135e8334-c5cb-477d-8d94-19b24fd3b345" fixedValue="false" optional="false">
				<from>input/transactionId</from>
				<to>transactionId</to>
			</steps>
			<steps xsi:type="be.nabu.libs.services.vm.step.Link" disabled="false" id="6a016dad-c3da-4a1e-897a-5d2213655b9b" fixedValue="false" optional="false">
				<from>input/languageId</from>
				<to>languageId</to>
			</steps>
			<steps xsi:type="be.nabu.libs.services.vm.step.Link" disabled="false" id="40e9510a-00ad-4058-a98e-7da618455778" fixedValue="false" optional="false">
				<from>resultd5f2507949f545e9b941db7f8a5c067b/results[0]/id</from>
				<to>componentId</to>
			</steps>
			<steps xsi:type="be.nabu.libs.services.vm.step.Link" disabled="false" id="9d324be2-2ee5-4b77-b7c5-636faf76f74c" fixedValue="false" optional="false">
				<from>input/verified</from>
				<to>verified</to>
			</steps>
		</steps>
		<steps xsi:type="be.nabu.libs.services.vm.step.Invoke" disabled="false" id="70e65e6e-cd6e-42fa-8cea-c3c56f7a00d3" serviceId="nabu.web.cms.core.database.component.selectByName" resultName="resultd5f2507949f545e9b941db7f8a5c067b" invocationOrder="0" temporaryMapping="true" x="32" y="20">
			<steps xsi:type="be.nabu.libs.services.vm.step.Link" disabled="false" id="209439c9-b039-43f2-a081-4a6c753757a7" fixedValue="true" optional="false">
				<from>user</from>
				<to>parameters/name</to>
			</steps>
		</steps>
		<steps xsi:type="be.nabu.libs.services.vm.step.Link" disabled="false" id="039f131d-4edb-45a3-b7d2-f701fdea1ae3" fixedValue="false" optional="false">
			<from>result11b9964b443d4d4c88f4f27f9f2e40ec/nodeId</from>
			<to>user/id</to>
		</steps>
		<steps xsi:type="be.nabu.libs.services.vm.step.Link" disabled="false" id="c6a0f3dc-8a2b-47ec-9b65-1e47e8eacbda" fixedValue="false" optional="false">
			<from>result11b9964b443d4d4c88f4f27f9f2e40ec/created</from>
			<to>user/created</to>
		</steps>
		<steps xsi:type="be.nabu.libs.services.vm.step.Link" disabled="false" id="36a20187-48db-4c2f-b1f7-511daebbbc4f" fixedValue="false" optional="false">
			<from>result11b9964b443d4d4c88f4f27f9f2e40ec/created</from>
			<to>user/modified</to>
		</steps>
		<steps xsi:type="be.nabu.libs.services.vm.step.Link" disabled="false" id="bcede5b8-3222-47ca-bbc6-e1a95b53cb68" fixedValue="false" optional="false">
			<from>input/alias</from>
			<to>user/alias</to>
		</steps>
		<steps xsi:type="be.nabu.libs.services.vm.step.Link" disabled="false" id="a3d522d0-15f8-4207-b232-bb273d78c09e" fixedValue="false" optional="false">
			<from>input/invitesLeft</from>
			<to>user/invitesLeft</to>
		</steps>
		<steps xsi:type="be.nabu.libs.services.vm.step.Link" disabled="false" id="d8d6db6a-47e1-430e-8965-e74ece14f32d" fixedValue="false" optional="false">
			<from>input/anonymous</from>
			<to>user/anonymous</to>
		</steps>
		<steps xsi:type="be.nabu.libs.services.vm.step.Link" disabled="false" id="a86b39ed-d853-425f-b4e1-6c7aa2d70806" fixedValue="false" optional="false">
			<from>result11b9964b443d4d4c88f4f27f9f2e40ec/nodeId</from>
			<to>output/userId</to>
		</steps>
		<steps xsi:type="be.nabu.libs.services.vm.step.Link" disabled="false" id="b3e1d8d7-3408-4b7a-aef1-9418a0350d72" fixedValue="false" optional="false">
			<from>input/realm</from>
			<to>user/realm</to>
		</steps>
	</steps>
	<steps xsi:type="be.nabu.libs.services.vm.step.Switch" disabled="false" comment="Set the id as the default alias" id="83e7fb4f-c208-41c7-872f-125f8bb561ab" query="user/alias">
		<steps xsi:type="be.nabu.libs.services.vm.step.Map" disabled="false" label="null" id="af97266d-f6bc-4a54-8b90-3799c5a56646">
			<steps xsi:type="be.nabu.libs.services.vm.step.Link" disabled="false" id="48e84ea8-a80e-4419-9356-e2054cbc353d" fixedValue="false" optional="false">
				<from>user/id</from>
				<to>user/alias</to>
			</steps>
		</steps>
	</steps>
	<steps xsi:type="be.nabu.libs.services.vm.step.Switch" disabled="false" id="993ad2a1-c3cc-4570-a70a-5f40e8bcc764" query="input/verified">
		<steps xsi:type="be.nabu.libs.services.vm.step.Map" disabled="false" label="false" id="367ccedd-aa8a-48ca-b598-b6ca0a4a396e">
			<steps xsi:type="be.nabu.libs.services.vm.step.Invoke" disabled="false" id="59a9491a-c8fb-494d-94d7-442dd2968df2" serviceId="nabu.utils.Server.uuid" resultName="result283e74e9e4ff466689bfb90048276c69" invocationOrder="0" temporaryMapping="true" x="68" y="76">
			</steps>
			<steps xsi:type="be.nabu.libs.services.vm.step.Link" disabled="false" id="ee058920-9187-4721-b2b4-120a5748a217" fixedValue="false" optional="false">
				<from>result283e74e9e4ff466689bfb90048276c69/uuid</from>
				<to>user/verificationCode</to>
			</steps>
			<steps xsi:type="be.nabu.libs.services.vm.step.Link" disabled="false" id="6cd217a2-031e-44b1-98d5-88ce7fb60fb9" fixedValue="false" optional="false">
				<from>result283e74e9e4ff466689bfb90048276c69/uuid</from>
				<to>output/verificationCode</to>
			</steps>
		</steps>
	</steps>
	<steps xsi:type="be.nabu.libs.services.vm.step.Switch" disabled="false" id="882551fc-2f8a-4c3c-ad39-49e42649b1b5">
		<steps xsi:type="be.nabu.libs.services.vm.step.Map" disabled="false" label="input/password != null" id="f1f922c6-699c-42aa-b197-f1efeb38dfd7">
			<steps xsi:type="be.nabu.libs.services.vm.step.Invoke" disabled="false" id="73033fd0-8d48-4121-9ebf-239109395fb0" serviceId="nabu.web.cms.core.utils.security.hashPassword" resultName="result4d4d9eca9fc64b57b01a21254148725c" invocationOrder="1" temporaryMapping="true" x="132" y="194">
				<steps xsi:type="be.nabu.libs.services.vm.step.Link" disabled="false" id="c83bcc61-62a7-488d-aba7-ac001e84b837" fixedValue="false" optional="false">
					<from>input/realm</from>
					<to>realm</to>
				</steps>
				<steps xsi:type="be.nabu.libs.services.vm.step.Link" disabled="false" id="2fd80cea-e790-4fd6-8346-211192575163" fixedValue="false" optional="false">
					<from>input/alias</from>
					<to>name</to>
				</steps>
				<steps xsi:type="be.nabu.libs.services.vm.step.Link" disabled="false" id="b0af0127-919e-4982-bfe8-4a32d1df21f0" fixedValue="false" optional="false">
					<from>input/password</from>
					<to>password</to>
				</steps>
				<steps xsi:type="be.nabu.libs.services.vm.step.Link" disabled="false" id="0b07ce7e-386e-4d28-b6ec-e33c66d5a4b6" fixedValue="false" optional="false">
					<from>resulte0a0995268fe44b78bbb11999aef5234/uuid</from>
					<to>salt</to>
				</steps>
				<steps xsi:type="be.nabu.libs.services.vm.step.Link" disabled="false" id="bed9255e-e0ab-4e00-8d5d-bc365347288c" fixedValue="false" optional="false">
					<from>input/algorithm</from>
					<to>algorithm</to>
				</steps>
			</steps>
			<steps xsi:type="be.nabu.libs.services.vm.step.Invoke" disabled="false" id="ee8a4c46-2c20-49c6-a8b9-1c5df96b7875" serviceId="nabu.utils.Server.uuid" resultName="resulte0a0995268fe44b78bbb11999aef5234" invocationOrder="0" temporaryMapping="true" x="68" y="69">
			</steps>
			<steps xsi:type="be.nabu.libs.services.vm.step.Link" disabled="false" id="a8922915-3455-4bac-8840-50ae79760733" fixedValue="false" optional="false">
				<from>resulte0a0995268fe44b78bbb11999aef5234/uuid</from>
				<to>user/salt</to>
			</steps>
			<steps xsi:type="be.nabu.libs.services.vm.step.Link" disabled="false" id="be789a61-19ac-4f85-afd0-c8155fec8e5a" fixedValue="false" optional="false">
				<from>result4d4d9eca9fc64b57b01a21254148725c/hash</from>
				<to>user/password</to>
			</steps>
			<steps xsi:type="be.nabu.libs.services.vm.step.Link" disabled="false" id="79b9a4ec-5fb2-42c8-bb8d-469c9c5cb34d" fixedValue="false" optional="false">
				<from>user/created</from>
				<to>user/passwordModified</to>
			</steps>
		</steps>
	</steps>
	<steps xsi:type="be.nabu.libs.services.vm.step.Map" disabled="false" id="7a7db4b4-9d4f-4fbe-be0a-9fafe5da37eb">
		<steps xsi:type="be.nabu.libs.services.vm.step.Invoke" disabled="false" id="4965458a-95a5-4526-b165-0a33ee254de8" serviceId="nabu.web.cms.core.database.user.insert" resultName="resultacfdf65a883b49d98087490a329e500a" invocationOrder="0" temporaryMapping="true" x="161" y="60">
			<steps xsi:type="be.nabu.libs.services.vm.step.Link" disabled="false" id="15c862a3-8875-4c12-9ce4-c28aea23ad08" fixedValue="false" optional="false">
				<from>input/connection</from>
				<to>connection</to>
			</steps>
			<steps xsi:type="be.nabu.libs.services.vm.step.Link" disabled="false" id="5cfd64a1-7df8-4ca7-81fd-9612717ed563" fixedValue="false" optional="false">
				<from>input/transactionId</from>
				<to>transaction</to>
			</steps>
			<steps xsi:type="be.nabu.libs.services.vm.step.Link" disabled="false" id="5b37e5db-17b9-41bb-8eaf-8acf57466a33" fixedValue="false" optional="false">
				<from>user</from>
				<to>parameters[0]</to>
			</steps>
		</steps>
	</steps>
	<steps xsi:type="be.nabu.libs.services.vm.step.Switch" disabled="false" id="bf2449cf-85cd-4ba4-8e17-6ccfe80f56b9">
		<steps xsi:type="be.nabu.libs.services.vm.step.Sequence" disabled="false" label="input/oauth2Token != null" id="4955038c-a93d-40f3-bc35-19789645a95a">
			<steps xsi:type="be.nabu.libs.services.vm.step.Map" disabled="false" label="Map token" id="c896bab5-599e-416e-9751-ea326533cad4">
				<steps xsi:type="be.nabu.libs.services.vm.step.Invoke" disabled="false" id="33581d90-7fe5-4d70-8f65-3e3fe8574e97" serviceId="nabu.utils.Server.uuid" resultName="resulte35fc6495a2f4a458dc320801b0beca3" invocationOrder="0" temporaryMapping="true" x="27" y="105">
				</steps>
				<steps xsi:type="be.nabu.libs.services.vm.step.Link" disabled="false" id="23a926b6-8fc0-48a1-89ab-852176e79559" fixedValue="false" optional="false">
					<from>resulte35fc6495a2f4a458dc320801b0beca3/uuid</from>
					<to>credential/id</to>
				</steps>
				<steps xsi:type="be.nabu.libs.services.vm.step.Link" disabled="false" id="413be9bb-fc6e-4574-8296-1eab8b3b5f71" fixedValue="false" optional="false">
					<from>user/created</from>
					<to>credential/created</to>
				</steps>
				<steps xsi:type="be.nabu.libs.services.vm.step.Link" disabled="false" id="78d75bf8-a602-4c55-8437-a9175bdda9a6" fixedValue="false" optional="false">
					<from>user/created</from>
					<to>credential/modified</to>
				</steps>
				<steps xsi:type="be.nabu.libs.services.vm.step.Link" disabled="false" id="b5e6087d-953f-4e41-88d4-070e709a1894" fixedValue="false" optional="false">
					<from>input/oauth2Token/oauth2Provider</from>
					<to>credential/oauth2Provider</to>
				</steps>
				<steps xsi:type="be.nabu.libs.services.vm.step.Link" disabled="false" id="33d278a3-c962-4802-a77a-a86f8ad80217" fixedValue="false" optional="false">
					<from>input/oauth2Token/token</from>
					<to>credential/token</to>
				</steps>
				<steps xsi:type="be.nabu.libs.services.vm.step.Link" disabled="false" id="2fec17ff-1557-4840-9595-b48a5c2d1113" fixedValue="false" optional="false">
					<from>input/oauth2Token/activeUntil</from>
					<to>credential/activeUntil</to>
				</steps>
				<steps xsi:type="be.nabu.libs.services.vm.step.Link" disabled="false" id="22424b95-047d-4f8a-8338-2263115b9381" fixedValue="false" optional="false">
					<from>input/oauth2Token/refreshToken</from>
					<to>credential/refreshToken</to>
				</steps>
				<steps xsi:type="be.nabu.libs.services.vm.step.Link" disabled="false" id="751be03f-1574-4669-99df-b6bcd20fe4d1" fixedValue="false" optional="false">
					<from>user/id</from>
					<to>credential/userId</to>
				</steps>
			</steps>
			<steps xsi:type="be.nabu.libs.services.vm.step.Map" disabled="false" id="aa060a89-2660-481d-be4f-12940033f304">
				<steps xsi:type="be.nabu.libs.services.vm.step.Invoke" disabled="false" id="4144342f-6f99-404d-aae0-dd19d1db6253" serviceId="nabu.web.cms.core.database.user.oauth2Credential.insert" resultName="result892a4fccd8cd4d2ab903857e2ec4378d" invocationOrder="0" temporaryMapping="true" x="173" y="93">
					<steps xsi:type="be.nabu.libs.services.vm.step.Link" disabled="false" id="fc7dbddc-50de-4a47-9a0f-83470fd07f86" fixedValue="false" optional="false">
						<from>input/connection</from>
						<to>connection</to>
					</steps>
					<steps xsi:type="be.nabu.libs.services.vm.step.Link" disabled="false" id="0f0c66f6-2d1e-40d7-bb12-a1add468d83a" fixedValue="false" optional="false">
						<from>input/transactionId</from>
						<to>transaction</to>
					</steps>
					<steps xsi:type="be.nabu.libs.services.vm.step.Link" disabled="false" id="9f49f815-1861-473b-8b0a-bce37704e2c1" fixedValue="false" optional="false">
						<from>credential</from>
						<to>parameters[0]</to>
					</steps>
				</steps>
			</steps>
		</steps>
	</steps>
</sequence>
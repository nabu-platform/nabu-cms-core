<sequence xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
		disabled="false"
		id="f0aa03c0-9638-4fa5-948e-a9a08d1473ab"
		lineNumber="1">
	<steps xsi:type="be.nabu.libs.services.vm.step.Map"
			comment="Get the current context"
			disabled="false"
			id="8b67e932-2605-4e76-b383-38a523811fac"
			label="input/id == null"
			lineNumber="2">
		<steps xsi:type="be.nabu.libs.services.vm.step.Invoke"
				disabled="false"
				id="29497657-c90e-4c20-a0f4-e0e2759479d5"
				serviceId="nabu.utils.Runtime.getServiceContext"
				resultName="result46f8f5f4192a47d0be34962912adcb57"
				temporaryMapping="true"
				x="166"
				y="195"
				invocationOrder="0"
				asynchronous="false"
				recache="false">
		</steps>
		<steps xsi:type="be.nabu.libs.services.vm.step.Link"
				disabled="false"
				id="a478bcac-421d-4204-8d02-f7b3d74a7d88"
				mask="false"
				optional="false"
				fixedValue="false">
			<from>result46f8f5f4192a47d0be34962912adcb57/serviceContext</from>
			<to>input/id</to>
		</steps>
	</steps>
	<steps xsi:type="be.nabu.libs.services.vm.step.Map"
			comment="Get the node (if any) attached to it"
			disabled="false"
			id="3869cdb3-e428-433f-8d52-bea641c24ae8"
			lineNumber="3">
		<steps xsi:type="be.nabu.libs.services.vm.step.Invoke"
				disabled="false"
				id="cc8b7501-e853-49fa-84c5-121ae1609c7c"
				serviceId="nabu.utils.reflection.Node.get"
				resultName="resulteb8bde1ffe3b40b2805323d928bc55b8"
				temporaryMapping="true"
				x="138"
				y="83"
				invocationOrder="0"
				asynchronous="false"
				recache="false">
			<steps xsi:type="be.nabu.libs.services.vm.step.Link"
					disabled="false"
					id="d80e1c2f-3c09-4fda-a7e1-574ce09121ed"
					mask="false"
					optional="false"
					fixedValue="false">
				<from>input/id</from>
				<to>id</to>
			</steps>
		</steps>
		<steps xsi:type="be.nabu.libs.services.vm.step.Link"
				disabled="false"
				id="6f85d18f-6db7-467a-a48e-26119d24da24"
				mask="false"
				optional="false"
				fixedValue="false">
			<from>resulteb8bde1ffe3b40b2805323d928bc55b8/node</from>
			<to>node</to>
		</steps>
	</steps>
	<steps xsi:type="be.nabu.libs.services.vm.step.Switch"
			disabled="false"
			id="a7001106-4922-4f7c-a7ff-182b5749fe6e"
			lineNumber="4"
			query="node/artifactClass">
		<steps xsi:type="be.nabu.libs.services.vm.step.Map"
				comment="If it's a web application, we use that"
				disabled="false"
				id="9dcda5bd-8768-4a61-9322-45a054a747dc"
				label="&quot;be.nabu.eai.module.web.application.WebApplication&quot;"
				lineNumber="5">
			<steps xsi:type="be.nabu.libs.services.vm.step.Link"
					disabled="false"
					id="01b2a06d-cfe0-433f-b69d-23132134a1d5"
					mask="false"
					optional="false"
					fixedValue="false">
				<from>input/id</from>
				<to>information/project</to>
			</steps>
			<steps xsi:type="be.nabu.libs.services.vm.step.Link"
					disabled="false"
					id="a646a261-6e94-49f8-a2fd-8c6928a22783"
					mask="false"
					optional="false"
					fixedValue="true">
				<from>application</from>
				<to>information/projectType</to>
			</steps>
		</steps>
		<steps xsi:type="be.nabu.libs.services.vm.step.Sequence"
				comment="Otherwise we use the default calculated from the context"
				disabled="false"
				id="d0d1365a-93b9-4658-ad49-db3645fcf399"
				lineNumber="6">
			<steps xsi:type="be.nabu.libs.services.vm.step.Map"
					comment="Calculate"
					disabled="false"
					id="796448ab-34a2-44b2-b907-706033dada03"
					lineNumber="7">
				<steps xsi:type="be.nabu.libs.services.vm.step.Invoke"
						disabled="false"
						id="77ccace4-060d-44c4-90a7-71a85e352090"
						serviceId="nabu.utils.Runtime.getContextInformation"
						resultName="result6e9837eb3086461da3150d974c96604f"
						temporaryMapping="true"
						x="89"
						y="88"
						invocationOrder="0"
						asynchronous="false"
						recache="false">
					<steps xsi:type="be.nabu.libs.services.vm.step.Link"
							disabled="false"
							id="e8ef5a36-809f-449e-8059-2a5c18a578a2"
							mask="false"
							optional="false"
							fixedValue="false">
						<from>input/id</from>
						<to>id</to>
					</steps>
				</steps>
				<steps xsi:type="be.nabu.libs.services.vm.step.Link"
						disabled="false"
						id="fb90ea44-7656-4d82-bf4b-8f84a7d13e5a"
						mask="false"
						optional="false"
						fixedValue="false">
					<from>result6e9837eb3086461da3150d974c96604f/information</from>
					<to>information</to>
				</steps>
			</steps>
			<steps xsi:type="be.nabu.libs.services.vm.step.Map"
					comment="The project type &quot;application&quot; is remapped to &quot;business&quot; because application is reserved for web applications"
					disabled="false"
					id="8f85c9bd-a5e9-4ab9-b706-9b502faea915"
					label="information/projectType == &quot;application&quot;"
					lineNumber="8">
				<steps xsi:type="be.nabu.libs.services.vm.step.Link"
						disabled="false"
						id="5858df28-055f-490d-8fd6-e5b8760d2735"
						mask="false"
						optional="false"
						fixedValue="true">
					<from>business</from>
					<to>information/projectType</to>
				</steps>
			</steps>
		</steps>
	</steps>
	<steps xsi:type="be.nabu.libs.services.vm.step.Map"
			disabled="false"
			id="8bdc169a-fc4f-47db-ac62-792ffb2a00a1"
			label="information"
			lineNumber="9">
		<steps xsi:type="be.nabu.libs.services.vm.step.Invoke"
				disabled="false"
				id="00d89fac-527a-4d59-a97d-17cf0b6d4165"
				serviceId="nabu.cms.core.crud.context.services.list"
				resultName="result9d5980889c054441a91aa887ae171d5c"
				temporaryMapping="true"
				x="87"
				y="52"
				invocationOrder="0"
				asynchronous="false"
				recache="false">
			<steps xsi:type="be.nabu.libs.services.vm.step.Link"
					disabled="false"
					id="11359281-8841-43de-9d50-7b9e170899e6"
					mask="false"
					optional="false"
					fixedValue="false">
				<from>information/project</from>
				<to>filter/name[0]</to>
			</steps>
		</steps>
		<steps xsi:type="be.nabu.libs.services.vm.step.Link"
				disabled="false"
				id="89829d1e-01bd-47d9-bcf5-5ee4ea5bf624"
				mask="false"
				optional="false"
				fixedValue="false">
			<from>result9d5980889c054441a91aa887ae171d5c/results[0]</from>
			<to>output/context</to>
		</steps>
	</steps>
	<steps xsi:type="be.nabu.libs.services.vm.step.Sequence"
			disabled="false"
			id="786f7909-b410-4f85-9a9f-b875afcd6709"
			label="information &amp;&amp; !output/context"
			lineNumber="10">
		<steps xsi:type="be.nabu.libs.services.vm.step.Map"
				comment="Create the context"
				disabled="false"
				id="3223fa26-24af-4e0d-b5c3-79b777fc1111"
				lineNumber="11">
			<steps xsi:type="be.nabu.libs.services.vm.step.Invoke"
					disabled="false"
					id="edb5ca68-1d47-47db-9c6b-92ae13594c54"
					serviceId="nabu.cms.core.crud.context.services.create"
					resultName="result01a2a635f390431da66aa8076a6ee53d"
					temporaryMapping="true"
					x="315"
					y="227"
					invocationOrder="1"
					asynchronous="false"
					recache="false">
				<steps xsi:type="be.nabu.libs.services.vm.step.Link"
						disabled="false"
						id="99f50579-5eb8-4feb-a367-604acefb2214"
						mask="false"
						optional="false"
						fixedValue="false">
					<from>information/project</from>
					<to>instance/name</to>
				</steps>
				<steps xsi:type="be.nabu.libs.services.vm.step.Link"
						disabled="false"
						id="c54b7687-64be-40e0-9411-c84f84195891"
						mask="false"
						optional="false"
						fixedValue="false">
					<from>result46686cb6b8c74e2bb9607d4299d5dc63/entryId</from>
					<to>instance/contextTypeId</to>
				</steps>
			</steps>
			<steps xsi:type="be.nabu.libs.services.vm.step.Invoke"
					disabled="false"
					id="902177d7-38a3-441f-a211-78275de7ac1d"
					serviceId="nabu.cms.core.services.masterdata.entry.get"
					resultName="result46686cb6b8c74e2bb9607d4299d5dc63"
					temporaryMapping="true"
					x="53"
					y="12"
					invocationOrder="0"
					asynchronous="false"
					recache="false">
				<steps xsi:type="be.nabu.libs.services.vm.step.Link"
						disabled="false"
						id="b53de620-501b-4a0c-b141-40756fd204bd"
						mask="false"
						optional="false"
						fixedValue="true">
					<from>contextType</from>
					<to>category</to>
				</steps>
				<steps xsi:type="be.nabu.libs.services.vm.step.Link"
						disabled="false"
						id="74bfb277-9b9e-4f51-98b7-841927e066dc"
						mask="false"
						optional="false"
						fixedValue="false">
					<from>information/projectType</from>
					<to>name</to>
				</steps>
			</steps>
			<steps xsi:type="be.nabu.libs.services.vm.step.Invoke"
					disabled="false"
					id="007075b6-0711-4dbd-af8a-877c41fb4738"
					serviceId="nabu.cms.core.crud.context.services.get"
					resultName="resultb17372355a6843f3ac239df73a2fab20"
					temporaryMapping="true"
					x="575"
					y="89"
					invocationOrder="2"
					asynchronous="false"
					recache="false">
				<steps xsi:type="be.nabu.libs.services.vm.step.Link"
						disabled="false"
						id="193da770-8f3b-4ff5-b026-b83384852c23"
						mask="false"
						optional="false"
						fixedValue="false">
					<from>result01a2a635f390431da66aa8076a6ee53d/created/id</from>
					<to>id</to>
				</steps>
			</steps>
			<steps xsi:type="be.nabu.libs.services.vm.step.Link"
					disabled="false"
					id="82899b89-763b-4dae-9c57-291175b77af7"
					mask="false"
					optional="false"
					fixedValue="false">
				<from>resultb17372355a6843f3ac239df73a2fab20/result</from>
				<to>output/context</to>
			</steps>
		</steps>
		<steps xsi:type="be.nabu.libs.services.vm.step.Map"
				comment="Ensure we have security for this context"
				disabled="false"
				id="07140cba-6adc-4e53-9129-f9eb42687b0e"
				lineNumber="12">
			<steps xsi:type="be.nabu.libs.services.vm.step.Invoke"
					disabled="false"
					id="17ee6b4f-bc29-4627-9ec6-5ed1507c3eb5"
					serviceId="nabu.cms.core.services.context.ensureSecurity"
					resultName="result89ddbf6c1c964c32958752c08eab7558"
					temporaryMapping="true"
					x="109"
					y="97"
					invocationOrder="0"
					asynchronous="false"
					recache="false">
				<steps xsi:type="be.nabu.libs.services.vm.step.Link"
						disabled="false"
						id="8db3a621-4df5-4329-92c2-9417b0ba7368"
						mask="false"
						optional="false"
						fixedValue="false">
					<from>output/context/id</from>
					<to>contextNodeId</to>
				</steps>
			</steps>
		</steps>
		<steps xsi:type="be.nabu.libs.services.vm.step.Map"
				comment="Make sure the admin has permissions as well"
				disabled="false"
				id="652dfd59-d08d-49c7-8ec7-b8c406a7900c"
				lineNumber="13">
			<steps xsi:type="be.nabu.libs.services.vm.step.Invoke"
					disabled="false"
					id="4c38a545-aeb1-4906-ba7e-2708daaca07c"
					serviceId="nabu.cms.core.services.context.ensureAdminPrivileges"
					resultName="resultce7f0207be124ce185074a97f8446735"
					temporaryMapping="true"
					x="192"
					y="48"
					invocationOrder="0"
					asynchronous="false"
					recache="false">
			</steps>
		</steps>
	</steps>
</sequence>